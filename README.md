# 2gis-tsk

![build and run tests](https://github.com/ck33122/2gis-tsk/workflows/build%20and%20run%20tests/badge.svg?branch=master)

тестовое задание для 2gis

## Условие

Напишите (консольную) программу, принимающую на вход имя файла и набор параметров. В зависимости от параметров программа должна работать в трёх режимах:

1. `task -f Test.tst -m words -v mother` печатает количество слов «mother» в файле «Test.tst»
2. `task -f Test.tst -m checksum` печатает 32-битную чексумму, рассчитанную по алгоритму `checksum = word1 + word2 + ... + wordN` (где `word1`..`wordN` – 32-хбитные слова, представляющие содержимое файла)
3. `task -h` печатает информацию о программе и описание параметров.

## Remark

- checksum
  - Чексумма считается в little-endian формате (даже если система на которой запущено приложение работает в big-endian режиме).
  - Если файл заканчивается слово меньшее, чем 4 байта, то это слово воспринимается например так: `0x01` `0x02` -> `0x00000201`.
  - Чексумма пустого файла равна 0 (т.е. `0x00000000`).
- words
  - Слова ищутся по файлу вне зависимости от символов, окружающих слово. Таким образом, если в файле будет содержимое `abcdabd` а на входе будет слово `ab`, то результатом будет количество 2.
  - В реализации присутствует 2 алгоритма поиска: перебором и рабина-карпа. Установить текущий алгоритм поиска можно по ключу `-a` указав в качестве аргумента `naive` и `rk` соответственно. По дефолту (если ключ не задан), работает поиск перебором (опытным путем определено, что его реализация работает быстрее).
- Решение можно использовать на больших файлах (т.е. больше размера оперативной памяти).
- Решение выполнено кроссплатформенным с использованием CMake (необходим cmake версии 3.1 на unix-like системах, или cmake версии 3.5 на windows).
- Решение использует фичи стандарта C++17, которые поддерживаются рядом компиляторов (рекомендуется собирать решение одним из них):
  - Visual Studio начиная с 2017 версии
  - GCC начиная с 7 версии
  - Clang начиная с 4 версии
  - Apple Clang начиная с 10 версии.

## Сборка и запуск

Для простоты приведу список команд для сборки в дебаг режиме:

```
mkdir build
cd build
cmake ..
cmake --build .
```

- Запуск в случае, если был использован компилятор MSVC:
  - `./Debug/tests` - запустить тесты
  - `./Debug/task` - запустить основную программу
- Запуск в остальных случаях:
  - `./tests` - запустить тесты
  - `./task` - запустить основную программу
